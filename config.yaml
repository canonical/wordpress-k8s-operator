# Copyright 2024 Canonical Ltd.
# See LICENSE file for licensing details.
options:
  blog_hostname:
    type: string
    description: >
      Hostname for accessing WordPress, if ingress relation is active. Defaults to the application
      name.
    default: ""
  initial_settings:
      type: string
      description: >
        YAML formatted WordPress configuration. It is used only
        during initial deployment. Changing it at later stage has no effect.
        If set to non empty string required keys are:

            user_name: admin_username
            admin_email: name@example.com

        Optionally you can also provide

            admin_password: <secret>  # autogenerated if not set

        If admin_password is not provided it will be automatically generated
        and stored on the operator pod in the /root directory.
      default: |
        user_name: admin
        admin_email: devnull@example.com
  plugins:
    type: string
    description: |
      Plugin slugs of plugins to be installed, separated by comma. Including or excluding
      a default plugin here will have no effect.
    default: ""
  themes:
    type: string
    description: |
      Theme slugs of themes to be installed, separated by comma. Including or excluding
      a default theme here will have no effect.
    default: ""
  wp_plugin_akismet_key:
    type: string
    description: Akismet key. If empty, akismet will not be automatically enabled
    default: ""
  wp_plugin_openid_team_map:
    type: string
    description: >
      Launchpad teams and corresponding access levels, for use with the openid plugins.

      Valid WordPress access levels are: administrator, editor, author, contributor, subscriber

      If empty, OpenID will not be enabled.

      Format is key=value pairs (where key is the Launchpad team, and value is
      the WordPress role) - commas separate multiple pairs.

      Example format:

          "site-sysadmins=administrator,site-editors=editor,site-executives=editor"
    default: ""
  wp_plugin_openstack-objectstorage_config:
    type: string
    description: |
      YAML dictionary with keys named after WordPress settings and the desired values.
      Please note that the settings will be reset to values provided every time hooks run.
      It is important to note that for multi-unit deployments, the `openstack-objectstorage-k8s`
      plugin must be enabled to sync data across WordPress applications. Furthermore, object ACLs
      must be configured beforehand to be accessible by public. See openstack 
      documentation(https://docs.openstack.org/swift/latest/overview_acl.html) for more detail.

      ```
      auth-url: authentication URL to openstack. Example: http://10.100.115.2/identity/v3
      bucket: name of the bucket for WordPress. Example: WordPress
      copy-to-swift: Value ‘1’ or ‘0’ denoting true, false respectively on whether to
        copy the local data to swift. Example: 1
      domain: OpenStack Project domain ID. Example: Default
      object-prefix: Object path prefix. Example: wp-content/uploads/
      password: OpenStack password. Example: openstack_secret_password
      region: OpenStack region. Example: RegionOne
      remove-local-file: Value ‘1’ or ‘0’ denoting true, false respectively on whether to remove local
        file. Example: 0
      serve-from-swift: Value ‘1’ or ‘0’ denoting true, false respectively on whether to serve the
        contents file directly from swift. If set, media URLs to path $WORDPRESS_IP/wp-content/uploads/
        will be proxied to $OPENSTACK_IP/{account}/{container}/{object-prefix}/. Example: 1
      swift-url: OpenStack Swift URL.
        example: http://10.100.115.2:8080/v3/AUTH_1d449b4237d3499dabd95210c33ca150
      tenant: OpenStack tenant name. Example: demo
      username: OpenStack username. Example: demo
      ```
    default: ""
  use_nginx_ingress_modsec:
    type: boolean
    default: true
    description: >
      Boolean value denoting whether modsec based WAF should be enabled. Applied if ingress
      relation is available.
  health_check_timeout_seconds:
    type: int
    default: 5
    description: >
      This setting specifies the duration, in seconds, that pebble will wait for a WordPress health check to complete
      before timing out. Use this setting to adjust the timeout based on expected system performance and conditions
  upload_max_filesize:
    type: string
    default: 2M
    description: >
       The maximum size of an uploaded file. https://www.php.net/manual/en/ini.core.php#ini.upload-max-filesize
  post_max_size:
    type: string
    default: 8M
    description: >
      Sets max size of post data allowed. https://www.php.net/manual/en/ini.core.php#ini.post-max-size
  max_execution_time:
    type: int
    default: 30
    description: >
      This sets the maximum time in seconds a script is allowed to run before it is terminated by the parser.
      https://www.php.net/manual/en/info.configuration.php#ini.max-execution-time
  max_input_time:
    type: int
    default: -1
    description: >
      This sets the maximum time in seconds a script is allowed to parse input data, like POST and GET.
      https://www.php.net/manual/en/info.configuration.php#ini.max-input-time
